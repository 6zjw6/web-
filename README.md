# 一起看视频项目

## 项目概述
本项目是一个在线视频共享平台，允许用户注册、登录，创建或加入视频观看房间。用户可以连接到 WebDAV 存储，选择视频进行播放，并在观看过程中同步进度和交流。

## 功能特性
- **用户认证**：支持用户注册和登录，使用 Cookie 实现自动登录。
- **房间管理**：用户可以创建或加入视频观看房间。
- **WebDAV 集成**：通过 WebDAV 地址访问和播放视频文件。
- **视频播放**：支持多种视频格式，可选择视频并同步播放进度。
- **聊天功能**：用户在房间内可以实时交流。
- **表情选择**：聊天时可使用表情丰富表达。

## 技术栈
- **前端**：HTML、CSS、JavaScript，使用 Bootstrap 框架进行页面布局。
- **后端**：PHP，使用 JSON 文件存储用户和房间信息。
- **其他**：使用 WebDAV 协议访问文件存储。

## 项目结构
```
.
├── index.html          # 主页面
├── style.css           # 样式文件
├── main.js             # 前端逻辑脚本
├── server.php          # 房间管理后端脚本
├── webdav_handler.php  # WebDAV 文件列表处理脚本
├── users.php           # 用户管理类
├── auth_handler.php    # 用户认证处理脚本
└── data                # 数据存储目录
    ├── rooms.json      # 房间信息
    └── users.json      # 用户信息
```

## 安装与配置
### 环境要求
- Web 服务器（如 Apache、Nginx）
- PHP 环境（建议 PHP 7.0 及以上）

### 安装步骤
1. 将项目文件上传到 Web 服务器的文档根目录。
2. 确保 `data` 目录具有读写权限。

### 配置说明
- 可在 `index.html` 中修改默认的 WebDAV 地址。
```html
<input type="text" class="form-control" id="webdavUrl" placeholder="WebDAV地址" 
       value="https://yp.zjw6.cn/dav" readonly>
```

## 使用方法
### 用户注册与登录
1. 打开 `index.html`，在登录/注册表单中输入用户名和密码。
2. 点击“注册”或“登录”按钮完成相应操作。

### 创建或加入房间
1. 登录成功后，在创建/加入房间表单中输入房间号、用户名、WebDAV 用户名和密码。
2. 点击“创建房间”或“加入房间”按钮。

### 视频播放与交流
1. 进入房间后，点击“选择视频”按钮选择要播放的视频。
2. 可使用“同步进度”按钮与主持人同步视频进度。
3. 在聊天框中输入消息，点击“发送”按钮或按下回车键发送消息。

## 注意事项
- 请确保 WebDAV 地址、用户名和密码正确，否则无法获取视频列表。
- 为保证视频播放流畅，建议定期清理浏览器缓存。

## 贡献与反馈
如果你对本项目有任何建议或发现问题，请提交 Issue 或 Pull Request。
